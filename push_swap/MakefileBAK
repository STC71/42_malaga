# ***** APARIENCE ************************************************************ #

GREEN = \033[0;32m
YELLOW = \033[0;33m
RED = \033[0;31m
DEFAULT = \033[0m

# ***** NAMES **************************************************************** #

NAME = push_swap 
NAME_B = checker

# ***** SOURCES ************************************************************** #

SRC_push_swap = 
SRC_checker = ./srcs
NAME_P = push_swap
NAME_B = checker

# ***** OBJECTS ************************************************************** #

OBJ_push_swap = $(SRC_push_swap:.c=.o)
OBJ_checker = $(SRC_checker:.c=.o)

# ***** COMPILATION ********************************************************** #

CC = gcc
CFLAGS = -Wall -Wextra -Werror
RM = rm -f
MK = make -C
MKD = mkdir -p
MCL = make clean -C
MFCL = make fclean -C

# ***** DIRECTORIES ********************************************************** #

LIBFT_DIR = ./libft
LIBFT_A = $(LIBFT_DIR)/libft.a
FTPRINTF_DIR = ./ft_printf
FTPRINTF_A = $(FTPRINTF_DIR)/libftprintf.a
SRCS_DIR = ./srcs
INCS_DIR = ./includes
OBJ_DIR = ./obj
lFLAGS = -L./libft -lft -L./ft_printf -lftprintf

# ***** RULES **************************************************************** #

all: $(NAME_P) $(NAME_B)

ftlibft:
	@echo "$(YELLOW)Compiling libft ...$(DEFAULT)"
	@$(MK) $(LIBFT_DIR)
	@echo "$(GREEN)libft COMPILED$(DEFAULT)"

ftprintf:
	@echo "$(YELLOW)Compiling ft_printf ...$(DEFAULT)"
	@$(MK) $(FTPRINTF_DIR)
	@echo "$(GREEN)ft_printf COMPILED$(DEFAULT)"

srcs:
	@echo "$(YELLOW)Creating directories ...$(DEFAULT)"
	@$(MK) $(SRCS_DIR)
	@$(MK) $(INCS_DIR)
	@$(MK) $(OBJ_DIR)
	@echo "$(GREEN)DIRECTORIES CREATED$(DEFAULT)"

$(NAME_P): ftlibft ftprintf $(OBJ_checker)
	@echo "$(YELLOW)Compiling push_swap ...$(NAME)$(DEFAULT)"
	@$(CC) $(CFLAGS) $(OBJ_push_swap) $(lFLAGS) -o $(NAME_P)
	@echo "$(GREEN)$(NAME) COMPILED push_swap$(DEFAULT)"

$(NAME_B): ftlibft ftprintf $(OBJ_checker
	@echo "$(YELLOW)Compiling bonus ...$(NAME_B)$(DEFAULT)"
	@$(CC) $(CFLAGS) $(OBJ_checker) $(lFLAGS) -o $(NAME_B)
	@echo "$(GREEN)$(NAME_B) COMPILED checker$(DEFAULT)"

%.o: %.c
	@$(CC) $(CFLAGS) -c $< -o $@

# ***** CLEANING ************************************************************* #

clean:
	@echo "$(RED)Cleaning ...$(DEFAULT)"
	@$(MCL) $(LIBFT_DIR)
	@$(MCL) $(FTPRINTF_DIR)
	@$(MCL) $(SRCS_DIR)
	@$(MCL) $(OBJ_DIR)
	@$(MCL) $(INCS_DIR)	
	@$(RM) $(OBJ_push_swap) $(OBJ_checker)
	@echo "$(GREEN)CLEANED$(DEFAULT)"

fclean: clean
	@echo "$(RED)Full cleaning ...$(DEFAULT)"
	
	@$(MFCL) $(LIBFT_DIR)
	@$(MFCL) $(FTPRINTF_DIR)
	@$(RM) $(NAME_P) $(NAME_B)
	@echo "$(GREEN)FULL CLEANED$(DEFAULT)"

re: fclean all
	@echo "$(YELLOW)Recompiling ...$(DEFAULT)"
	@echo "ReCOMPILED"

# ***** PHONY **************************************************************** #

.PHONY: all clean fclean re checker

# ***** THE END ************************************************************** #
